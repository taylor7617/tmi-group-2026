<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TMI Group | Private Capacity Ledger</title>
  <meta name="description" content="TMI Group — private capacity ledger (documented & auditable internally)." />

  <style>
    :root{
      --bg0:#05070c;
      --bg1:#070b12;
      --glass: rgba(255,255,255,.06);
      --glass2: rgba(255,255,255,.09);
      --stroke: rgba(255,255,255,.14);
      --muted: rgba(255,255,255,.72);
      --muted2: rgba(255,255,255,.55);
      --text: rgba(255,255,255,.92);
      --good: rgba(120,255,210,.92);
      --warn: rgba(255,215,120,.92);
      --bad: rgba(255,120,160,.92);
      --shadow: 0 18px 45px rgba(0,0,0,.55);
      --radius: 18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 15% 10%, rgba(120,210,255,.14), transparent 55%),
        radial-gradient(900px 600px at 80% 20%, rgba(170,120,255,.10), transparent 60%),
        radial-gradient(1100px 700px at 65% 85%, rgba(120,255,210,.08), transparent 55%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      overflow-x:hidden;
    }
    .wrap{
      max-width: 1200px;
      margin: 0 auto;
      padding: 22px 18px 36px;
    }

    header{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:14px;
      margin-bottom:14px;
    }
    .brand{display:flex;flex-direction:column;gap:6px}
    .brand .kicker{
      letter-spacing:.14em;
      text-transform:uppercase;
      font-size:12px;
      color:var(--muted2);
    }
    .brand h1{
      margin:0;
      font-size:22px;
      line-height:1.1;
      font-weight:800;
    }
    .brand .sub{
      margin:0;
      color:var(--muted);
      font-size:13px;
      line-height:1.35;
      max-width: 760px;
    }

    .badge{
      display:flex;
      flex-direction:column;
      align-items:flex-end;
      gap:6px;
      min-width: 300px;
    }
    .doctrine{
      padding:10px 12px;
      border:1px solid rgba(255,255,255,.16);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.05));
      border-radius: 14px;
      box-shadow: var(--shadow);
      text-align:right;
    }
    .doctrine .line1{
      font-weight:800;
      font-size:13px;
      letter-spacing:.02em;
      color: rgba(255,255,255,.95);
      text-shadow:
        0 0 12px rgba(120,210,255,.22),
        0 0 28px rgba(170,120,255,.12);
    }
    .doctrine .line2{
      margin-top:4px;
      font-size:12px;
      color: rgba(255,255,255,.72);
    }
    .micro{font-size:11px;color: rgba(255,255,255,.52);}

    /* KPI Booths */
    .kpis{
      display:grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap:10px;
      margin: 14px 0 14px;
    }
    .kpis.optional{
      grid-template-columns: repeat(3, minmax(0, 1fr));
      margin-top: 0;
    }

    @media (max-width: 980px){
      .kpis{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
      .kpis.optional{ grid-template-columns: repeat(1, minmax(0, 1fr)); }
      .badge{ align-items:flex-start; min-width: unset; }
      header{ flex-direction:column; align-items:stretch; }
      .doctrine{ text-align:left; }
    }

    .booth{
      position:relative;
      border-radius: var(--radius);
      border:1px solid var(--stroke);
      background: linear-gradient(180deg, var(--glass2), var(--glass));
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .booth::before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(420px 180px at 20% 10%, rgba(120,210,255,.18), transparent 60%),
        radial-gradient(320px 160px at 80% 20%, rgba(170,120,255,.14), transparent 60%),
        radial-gradient(260px 160px at 60% 100%, rgba(120,255,210,.10), transparent 60%);
      pointer-events:none;
      filter: blur(8px);
      opacity:.85;
    }
    .booth > .inner{
      position:relative;
      padding: 12px 12px 12px;
      min-height: 86px;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      gap:8px;
    }
    .label{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      color: rgba(255,255,255,.75);
      font-size:11px;
      letter-spacing:.12em;
      text-transform:uppercase;
    }
    .pill{
      font-size:10px;
      letter-spacing:.08em;
      padding:4px 8px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(0,0,0,.20);
      color: rgba(255,255,255,.70);
      white-space:nowrap;
    }
    .value{
      font-size: 22px;
      font-weight: 900;
      letter-spacing:.01em;
    }
    .hint{
      font-size: 11px;
      color: rgba(255,255,255,.58);
      line-height:1.25;
    }
    .accent-good{ color: var(--good); }
    .accent-warn{ color: var(--warn); }
    .accent-bad{ color: var(--bad); }

    /* Main Booth Grid */
    .grid{
      display:grid;
      grid-template-columns: 2fr 1fr;
      gap:12px;
    }
    @media (max-width: 980px){
      .grid{ grid-template-columns: 1fr; }
    }
    .panel-title{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding: 12px 14px 10px;
      border-bottom:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.12);
    }
    .panel-title h2{
      margin:0;
      font-size: 13px;
      letter-spacing:.10em;
      text-transform:uppercase;
      color: rgba(255,255,255,.82);
    }
    .panel-title .right{
      display:flex;
      gap:8px;
      align-items:center;
      color: rgba(255,255,255,.58);
      font-size:11px;
    }
    .frame{
      padding: 0;
      height: 560px;
    }
    @media (max-width: 980px){
      .frame{ height: 520px; }
    }
    iframe{
      width:100%;
      height:100%;
      border:0;
      display:block;
      border-radius: 0 0 var(--radius) var(--radius);
    }

    .side{
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    .mini{ padding: 12px 14px; }
    .mini h3{
      margin:0 0 8px;
      font-size:12px;
      letter-spacing:.12em;
      text-transform:uppercase;
      color: rgba(255,255,255,.80);
    }
    .mini p{
      margin:0;
      color: rgba(255,255,255,.70);
      font-size: 12px;
      line-height:1.45;
    }
    .rule{
      margin-top:10px;
      padding-top:10px;
      border-top:1px dashed rgba(255,255,255,.16);
      color: rgba(255,255,255,.60);
      font-size: 11px;
      line-height:1.4;
    }
    .footer{
      margin-top:14px;
      display:flex;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      color: rgba(255,255,255,.52);
      font-size:11px;
    }
    .mono{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      letter-spacing:.01em;
    }
    .no-links-note{ opacity:.75; }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="kicker">TMI GROUP • PRIVATE CAPACITY LEDGER</div>
        <h1>42240 Geospatial Readiness Grid</h1>
        <p class="sub">
          This page is the watch-friendly public shell. The embedded grid window is the authority.
          Evidence remains internal.
        </p>
      </div>

      <div class="badge">
        <div class="doctrine">
          <div class="line1">“Our execution is documented and auditable.”</div>
          <div class="line2">If pressed: “Internally.”</div>
        </div>
        <div class="micro no-links-note">No outbound links. No negotiations. Evidence stays in the vault.</div>
      </div>
    </header>

    <!-- Primary KPI Booths (4) -->
    <section class="kpis" aria-label="Ledger Summary">
      <div class="booth"><div class="inner">
        <div class="label"><span>Total Sites (Ledger Count)</span><span class="pill">SUMMARY</span></div>
        <div class="value" id="kpiSites">—</div>
        <div class="hint">Count of recorded locations in the internal ledger feed.</div>
      </div></div>

      <div class="booth"><div class="inner">
        <div class="label"><span>Total Square Footage (Recorded)</span><span class="pill">SUMMARY</span></div>
        <div class="value" id="kpiSqft">—</div>
        <div class="hint">Aggregate square footage recorded in the internal ledger feed.</div>
      </div></div>

      <div class="booth"><div class="inner">
        <div class="label"><span>Sites Marked Ready</span><span class="pill">READINESS</span></div>
        <div class="value accent-good" id="kpiReadySites">—</div>
        <div class="hint">Locations currently flagged <span class="mono">ready</span> in the ledger.</div>
      </div></div>

      <div class="booth"><div class="inner">
        <div class="label"><span>Square Footage Marked Ready</span><span class="pill">READINESS</span></div>
        <div class="value accent-good" id="kpiReadySqft">—</div>
        <div class="hint">Ready footprint recorded in the internal ledger.</div>
      </div></div>
    </section>

    <!-- Optional KPI Booths (3 value add) -->
    <section class="kpis optional" aria-label="Additional Ledger Indicators">
      <div class="booth"><div class="inner">
        <div class="label"><span>ZIP Coverage (Distinct)</span><span class="pill">COVERAGE</span></div>
        <div class="value" id="kpiZipCoverage">—</div>
        <div class="hint">Distinct ZIP codes represented in the ledger feed.</div>
      </div></div>

      <div class="booth"><div class="inner">
        <div class="label"><span>Readiness Rate</span><span class="pill">RATIO</span></div>
        <div class="value accent-warn" id="kpiReadinessRate">—</div>
        <div class="hint">Ready sites ÷ total sites (percentage).</div>
      </div></div>

      <div class="booth"><div class="inner">
        <div class="label"><span>Primary Ready ZIP</span><span class="pill">FOCUS</span></div>
        <div class="value" id="kpiPrimaryReadyZip">—</div>
        <div class="hint">ZIP with the highest ready square footage.</div>
      </div></div>
    </section>

    <!-- Main Booth Grid -->
    <section class="grid" aria-label="Grid + Operational Notes">
      <div class="booth">
        <div class="panel-title">
          <h2>Grid Window • Geospatial Ledger</h2>
          <div class="right">
            <span class="mono">mid=1lBzuF9XyewzHmNiVOufMdqrbng_5Xf8</span>
          </div>
        </div>
        <div class="frame">
          <iframe
            title="TMI 42240 Grid Map"
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
            src="https://www.google.com/maps/d/u/0/embed?mid=1lBzuF9XyewzHmNiVOufMdqrbng_5Xf8&ehbc=2E312F">
          </iframe>
        </div>
      </div>

      <div class="side">
        <div class="booth">
          <div class="inner mini">
            <h3>Operational Separation</h3>
            <p>
              <span class="mono">Single-Site Wing (Marcia)</span>: controls and maintains individual lease records, site readiness notes, and evidence indexing for single locations.<br/>
              <span class="mono">Multi-Site Wing (TMI Aggregation)</span>: aggregates sites into contract-ready groupings, maintains summary readiness views, and controls multi-site capacity reporting.<br/>
              <span class="mono">POC Wing (Read-Only)</span>: restricted visibility for verification only (grid + summary + proof packet as approved). No edit capability.
            </p>
            <div class="rule mono">
              External language:<br/>
              “Our execution is documented and auditable.”<br/>
              “Internally.”
            </div>
          </div>
        </div>

        <div class="booth">
          <div class="inner mini">
            <h3>Page Function</h3>
            <p>
              Displays the authoritative grid window and shows neutral readiness indicators.
              Evidence remains internal.
            </p>
            <div class="rule">
              KPI numbers are computed from a ledger feed (CSV pasted into this file, or later from an exported CSV/JSON).
            </div>
          </div>
        </div>

        <div class="booth">
          <div class="inner mini">
            <h3>Internal Legal Summary</h3>
            <p class="mono">
              TMI Group operates a privately controlled, multi-site capacity ledger and evidence vault documenting leasehold control, readiness status, and activation timelines for mission-support space under NAICS 531120.
            </p>
          </div>
        </div>
      </div>
    </section>

    <div class="footer">
      <div>NAICS 531120 • Private Capacity Ledger</div>
      <div class="mono">documented • auditable • internal</div>
    </div>
  </div>

  <script>
    /**************************************************************
     * LEDGER FEED (PASTE CSV EXPORT FROM MY MAPS LAYER HERE)
     *
     * Required columns (case-insensitive):
     *   - zip
     *   - sqft
     *   - status  (ready|pending|reserved|inactive)
     * Optional:
     *   - activation_window (24-72h|3-7d|7-14d|14+d)
     **************************************************************/
    const SITES_CSV = `
zip,sqft,status,activation_window
42240,1200,ready,24-72h
42240,2400,ready,3-7d
42240,1800,pending,7-14d
42240,3200,reserved,14+d
    `.trim();

    function parseCSV(text) {
      const lines = text.split(/\r?\n/).filter(Boolean);
      if (lines.length < 2) return [];
      const headers = lines[0].split(",").map(h => h.trim().toLowerCase());
      const rows = [];
      for (let i = 1; i < lines.length; i++) {
        const cols = lines[i].split(",").map(c => c.trim());
        const row = {};
        headers.forEach((h, idx) => row[h] = (cols[idx] ?? "").trim());
        rows.push(row);
      }
      return rows;
    }

    function toInt(n) {
      const x = String(n ?? "").replace(/[^0-9]/g, "");
      return x ? parseInt(x, 10) : 0;
    }

    function normStatus(s) {
      const v = String(s ?? "").toLowerCase().trim();
      if (["ready","pending","reserved","inactive"].includes(v)) return v;
      return "pending";
    }

    function formatNumber(n) {
      return new Intl.NumberFormat("en-US").format(n);
    }

    function computeKPIs(rows) {
      const sites = rows.map(r => ({
        zip: String(r.zip ?? "").trim(),
        sqft: toInt(r.sqft),
        status: normStatus(r.status),
        activation_window: String(r.activation_window ?? "").trim()
      }));

      const totalSites = sites.length;
      const totalSqft = sites.reduce((a,s) => a + s.sqft, 0);

      const ready = sites.filter(s => s.status === "ready");
      const readySites = ready.length;
      const readySqft = ready.reduce((a,s) => a + s.sqft, 0);

      const zipSet = new Set(sites.map(s => s.zip).filter(Boolean));
      const zipCoverage = zipSet.size;

      const readinessRate = totalSites > 0 ? (readySites / totalSites) : 0;

      const readyByZip = new Map();
      for (const s of ready) {
        if (!s.zip) continue;
        readyByZip.set(s.zip, (readyByZip.get(s.zip) || 0) + s.sqft);
      }
      let primaryReadyZip = "—";
      let max = -1;
      for (const [zip, sqft] of readyByZip.entries()) {
        if (sqft > max) { max = sqft; primaryReadyZip = zip; }
      }

      return {
        totalSites, totalSqft,
        readySites, readySqft,
        zipCoverage,
        readinessRate,
        primaryReadyZip
      };
    }

    function paintKPIs(k) {
      document.getElementById("kpiSites").textContent = formatNumber(k.totalSites);
      document.getElementById("kpiSqft").textContent = formatNumber(k.totalSqft);
      document.getElementById("kpiReadySites").textContent = formatNumber(k.readySites);
      document.getElementById("kpiReadySqft").textContent = formatNumber(k.readySqft);

      document.getElementById("kpiZipCoverage").textContent = formatNumber(k.zipCoverage);
      document.getElementById("kpiReadinessRate").textContent =
        (k.readinessRate * 100).toFixed(1) + "%";
      document.getElementById("kpiPrimaryReadyZip").textContent = k.primaryReadyZip;
    }

    (function init(){
      const rows = parseCSV(SITES_CSV);
      const k = computeKPIs(rows);
      paintKPIs(k);
    })();
  </script>
</body>
</html>
